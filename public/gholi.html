<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>gholi</title>
</head>

<body>
    <h1>gholi page</h1>

    <button onclick="init()">soudddd</button>
    <script>

        var context;
        // window.addEventListener('load', init, false);
        function init() {
            try {
                // Fix up for prefixing
                alert('gholi started')
                window.AudioContext = window.AudioContext || window.webkitAudioContext;
                context = new AudioContext();
                alert('audio support', context);

                const REAL_TIME_FREQUENCY = 440;
                const ANGULAR_FREQUENCY = REAL_TIME_FREQUENCY * 2 * Math.PI;

                let audioContext = new AudioContext();
                let myBuffer = audioContext.createBuffer(1, 88200, 44100);
                let myArray = myBuffer.getChannelData(0);
                for (let sampleNumber = 0; sampleNumber < 88200; sampleNumber++) {
                    myArray[sampleNumber] = generateSample(sampleNumber);
                }

                function generateSample(sampleNumber) {
                    let sampleTime = sampleNumber / 44100;
                    let sampleAngle = sampleTime * ANGULAR_FREQUENCY;
                    return Math.sin(sampleAngle);
                }

                let src = audioContext.createBufferSource();
                src.buffer = myBuffer;
                src.connect(audioContext.destination);
                src.start();
            }
            catch (e) {
                alert('Web Audio API is not supported in this browser');
            }
        }

    </script>
</body>

</html>